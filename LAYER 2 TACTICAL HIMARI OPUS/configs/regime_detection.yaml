# ============================================================================
# HIMARI Layer 2 - Regime Detection Configuration
# Complete configuration for regime detection subsystem (8 methods)
# ============================================================================

regime_detection:
  # B1: Student-t AH-HMM
  ahhmm:
    n_market_states: 4
    n_meta_states: 2
    n_features: 3
    df_normal: 5.0
    df_crisis: 3.0
    update_window: 500
    transition_prior: 0.1
    learning_rate: 0.01

  # B2: Meta-Regime Layer
  meta_regime:
    indicator_weights:
      vix: 0.30
      dvol: 0.25
      epu: 0.20
      funding_rate: 0.15
      oi_change: 0.10
    transition_up_threshold: 0.65
    transition_down_threshold: 0.35
    min_bars_between_transitions: 48
    score_ema_span: 24

  # B3: Causal Information Geometry
  cig:
    n_assets: 6
    window_size: 100
    reference_window: 500
    drift_threshold: 0.4
    ema_span: 20

  # B4: AEDL (offline training)
  aedl:
    feature_dim: 60
    hidden_dim: 128
    n_regimes: 4
    inner_lr: 0.01
    outer_lr: 0.001
    inner_steps: 5
    n_epochs: 100

  # B5: Jump Detector
  jump:
    sigma_threshold: 3.0
    sigma_threshold_elevated: 2.5
    window_size: 100
    crisis_duration: 6
    monitored_features: [0, 2] # Return, volatility

  # B6: Hurst Gating
  hurst:
    window_size: 100
    trend_threshold: 0.55
    meanrev_threshold: 0.45
    max_lag: 20
    ema_span: 20

  # B7: Online Baum-Welch
  online_bw:
    emission_update_every: 1
    transition_update_every: 100
    emission_lr: 0.01
    transition_lr: 0.005

  # B8: ADWIN
  adwin:
    delta: 0.002
    min_window: 30
    max_window: 2000
    clock: 32
